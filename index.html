<html>
<head>
<title>Email Image Placeholder</title>
<style type="text/css">
#what-it-looks-like-enabled {
	margin-top: 10px;
}
</style>
</head>
<body>
	<form>
		<label for="image-to-placehold">Image To Placehold:</label>
		<input type="text"
		       id="image-to-placehold"
		       name="imageToPlacehold"
		       value="test-images/reads-emails.jpg" />

		<label for="closing-tags">Closing Tags?</label>
		<input type="checkbox" checked="checked" id="closing-tags" />

		<label for="pixel-size">Pixel Size:</label>
		<select id="pixel-size">
			<option value="2">2 - Caution: Content Length!</option>
			<option value="5">5 - Caution: Content Length!</option>
			<option value="10" selected="selected">10</option>
			<option value="15">15</option>
			<option value="20">20</option>
			<option value="25">25</option>
			<option value="50">50</option>
		</select>
	</form>

	<div id="results">
		<textarea id="email-code"></textarea>
		<label for="content-length">Content-Length:</label>
		<input id="content-length" value="" />

		<div id="what-it-looks-like">
			<div id="what-it-looks-like-blocked"></div>
			<div id="what-it-looks-like-enabled"></div>
		</div>
	</results>

	<script src="EmailImagePlaceholder.js"></script>
	<script>
		window.onload = function(){
			var chkClosingTags = document.getElementById("closing-tags"),
			    selPixelSize = document.getElementById("pixel-size"),
			    imgSrc = document.getElementById("image-to-placehold");

			function convertImage(){
				var eip = new EmailImagePlaceholder(
					imgSrc.value,
					parseInt(selPixelSize.options[selPixelSize.selectedIndex].value, 10),
					function(){
						var html = eip.getHtml();
						document.getElementById("email-code").value = html;
						document.getElementById("content-length").value = html.length;
						document.getElementById("what-it-looks-like-blocked").innerHTML = eip.getHtml(false);
						document.getElementById("what-it-looks-like-enabled").innerHTML = html;
					},
					chkClosingTags.checked,
					1.0);
			};

			imgSrc.onblur = imgSrc.onchange = chkClosingTags.onchange = selPixelSize.onchange = function(){
				convertImage();
			};
		}
	</script>
</body>
</html>